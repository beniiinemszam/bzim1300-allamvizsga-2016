function setFinished(){finished=!0}function post(a){var b="post",c=window.location.pathname,d=document.createElement("form");d.setAttribute("method",b),d.setAttribute("action",c);var e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name","aid"),e.setAttribute("value",a),d.appendChild(e),document.body.appendChild(d),d.submit()}function newQuestion(a){var c,b=window.location.pathname;c=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),c.onreadystatechange=function(){if(4==c.readyState&&200==c.status){var a=JSON.parse(c.responseText),b=parseInt(a.qn)+1;document.getElementById("question-number").innerText="question: "+a.qtn+" / "+b,document.getElementById("question-correct").innerText="correct: "+a.cn,document.getElementById("question").innerText=a.question,document.getElementById("bt1").innerHTML="<span>"+a.ans1+"</span>",document.getElementById("bt2").innerHTML="<span>"+a.ans2+"</span>",document.getElementById("bt3").innerHTML="<span>"+a.ans3+"</span>",document.getElementById("bt4").innerHTML="<span>"+a.ans4+"</span>",document.getElementById("bt1").value=a.aid1,document.getElementById("bt2").value=a.aid2,document.getElementById("bt3").value=a.aid3,document.getElementById("bt4").value=a.aid4,a.qtn==a.qn+1&&setFinished()}},c.open("POST",b,!0),c.setRequestHeader("Content-Type","application/json;charset=UTF-8"),c.send(JSON.stringify({aid:a}))}var finished=!1;window.onload=function(){var a;a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var b=JSON.parse(a.responseText);1==b.qnumber&&setFinished()}},a.open("GET","/getquestionnumber/"+document.getElementById("bt1").value,!0),a.send()},$("button").click(function(){finished?post(this.value):newQuestion(this.value)});